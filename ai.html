<!DOCTYPE html>
<html>
<head>
    <title>Chatzi Buddy</title>
    <style>
        /* CSS styles for Chatzi Buddy and ChatGPT window */
    </style>
</head>
<body>
    <div id="chatzi-buddy-icon"></div>

    <div class="menu">
        <div class="menu-option" id="menu-chatbox">Chatbox</div>
        <div class="menu-option" id="menu-chatgpt">ChatGPT</div>
        <div class="menu-option" id="menu-open-chat">Open Chat</div>
        <div class="menu-option" id="menu-about">About</div>
    </div>

    <div id="chatzi-buddy">
        <div id="chat-window"></div>
        <input type="text" id="message-box" placeholder="Type your message..." />
    </div>

    <div id="chat-gpt-window">
        <div id="chat-gpt-window-title">ChatGPT</div>
        <div id="chat-gpt-window-content"></div>
        <div id="chat-gpt-options">
            <label for="chat-gpt-response-type">Response Type:</label>
            <select id="chat-gpt-response-type">
                <option value="chatbox">Put in Chatbox</option>
                <option value="typing">Type Out</option>
            </select>
        </div>
        <input type="text" id="chat-gpt-message-box" placeholder="Type your message..." />
    </div>

    <div id="about-window">
        <div id="about-window-title">About</div>
        <div id="about-window-content">
            <p>
                This is Chatzi Buddy, a helpful chat assistant.
            </p>
            <p>
                The "Chatbox" option allows you to have a conversation using the built-in chatbox.
            </p>
            <p>
                The "ChatGPT" option lets you use ChatGPT, a powerful language model, for generating responses.
                You can choose whether to put the generated response directly in the chatbox or have it typed out for you.
            </p>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Existing code for Chatzi Buddy

        var chatWindow = document.getElementById("chat-window");
        var messageBox = document.getElementById("message-box");

        function sendMessage(message) {
            var sentMessageElement = document.createElement("div");
            sentMessageElement.innerHTML = "<strong>You:</strong> " + message;
            chatWindow.appendChild(sentMessageElement);
        }

        messageBox.addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                var message = messageBox.value.trim();
                if (message !== "") {
                    sendMessage(message);
                    messageBox.value = "";
                }
            }
        });

        // Existing code for ChatGPT integration

        var chatGptWindow = document.getElementById("chat-gpt-window");
        var chatGptWindowContent = document.getElementById("chat-gpt-window-content");
        var chatGptMessageBox = document.getElementById("chat-gpt-message-box");
        var chatGptResponseTypeSelect = document.getElementById("chat-gpt-response-type");

        function showChatGptWindow() {
            chatGptWindow.style.display = "block";
        }

        function hideChatGptWindow() {
            chatGptWindow.style.display = "none";
        }

        function sendMessageToChatGpt(message) {
            var responseType = chatGptResponseTypeSelect.value;
            if (responseType === "chatbox") {
                // Put the generated response directly in the chatbox
                var receivedMessageElement = document.createElement("div");
                receivedMessageElement.innerHTML = "<strong>ChatGPT:</strong> " + message;
                chatWindow.appendChild(receivedMessageElement);
            } else if (responseType === "typing") {
                // Type out the generated response
                var charactersPerSecond = 50; // Adjust this value to control typing speed
                var delay = (message.length / charactersPerSecond) * 1000;

                // Type out the response character by character
                var index = 0;
                var typingInterval = setInterval(function() {
                    messageBox.value += message[index];
                    index++;

                    if (index >= message.length) {
                        clearInterval(typingInterval);
                    }
                }, delay);
            }
        }

        document.getElementById("menu-chatbox").addEventListener("click", function() {
            hideChatGptWindow();
        });

        document.getElementById("menu-chatgpt").addEventListener("click", function() {
            hideChatGptWindow();
            // Code to initiate ChatGPT goes here
        });

        document.getElementById("menu-open-chat").addEventListener("click", function() {
            showChatGptWindow();
        });

        document.getElementById("menu-about").addEventListener("click", function() {
            document.getElementById("about-window").style.display = "block";
        });

        chatGptMessageBox.addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                var message = chatGptMessageBox.value.trim();
                if (message !== "") {
                    sendMessageToChatGpt(message);
                    chatGptMessageBox.value = "";
                }
            }
        });
    </script>
</body>
</html>

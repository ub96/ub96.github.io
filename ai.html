<!DOCTYPE html>
<html>
<head>
  <title>Chatzi Buddy Menu</title>
  <style>
    /* CSS styles for the menu window */
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin-bottom: 10px;
    }
  </style>
  <script>
    // Function to make Chatzi Buddy talk
    function talk(message) {
      var chatbox = document.getElementById("chatbox");
      chatbox.value += "Chatzi Buddy: " + message + "\n";
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function openChatWindow() {
      var chatGPTWindow = window.open("https://ub96.github.io/ai.html", "_blank", "width=800,height=600");
      chatGPTWindow.addEventListener("load", function() {
        // Pass the prompt text to the ChatGPT window
        var promptText = prompt("Enter the chat prompt");
        chatGPTWindow.postMessage(promptText, "*");
      });
    }

    function closeChatziBuddy() {
      window.close();
    }

    document.addEventListener("contextmenu", function(event) {
      event.preventDefault(); // Prevent the default right-click menu
      var menu = document.getElementById("right-click-menu");
      menu.style.left = event.clientX + "px";
      menu.style.top = event.clientY + "px";
      menu.style.display = "block";
    });

    document.addEventListener("click", function(event) {
      var menu = document.getElementById("right-click-menu");
      if (menu.style.display === "block") {
        menu.style.display = "none";
      }
    });
  </script>
</head>
<body>
  <div id="right-click-menu">
    <ul>
      <li><a href="#" onclick="openChatWindow()">Open Chat</a></li>
      <li><a href="#" onclick="closeChatziBuddy()">Close Chatzi Buddy</a></li>
    </ul>
  </div>

  <script>
    // Code for displaying the Chatzi Buddy image when launched
    var chatziBuddyImage = document.createElement("img");
    chatziBuddyImage.src = "https://raw.githubusercontent.com/ub96/ub96.github.io/main/bonzi.png";
    chatziBuddyImage.alt = "Chatzi Buddy";
    chatziBuddyImage.addEventListener("click", openChatWindow);
    document.body.appendChild(chatziBuddyImage);

    // Function to make Chatzi Buddy say something
    function saySomething() {
      talk("Hello, I'm Chatzi Buddy! How can I assist you?");
    }

    // Call the saySomething function
    saySomething();
  </script>

  <textarea id="chatbox" rows="10" cols="50" readonly></textarea>

  <script>
    // Function to handle messages received from the ChatGPT window
    window.addEventListener("message", function(event) {
      var chatbox = document.getElementById("chatbox");
      var message = event.data;
      chatbox.value += "ChatGPT: " + message + "\n";
      chatbox.scrollTop = chatbox.scrollHeight;
    });
  </script>
</body>
</html>
